import{_ as E,a as z,b as D,I as k,g as R,R as F,c as B,d as H}from"./nonIterableRest-DsePzpQ9.js";import{r as p}from"./index-BKyFwriW.js";function M(){if(console&&console.warn){for(var r,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];typeof n[0]=="string"&&(n[0]="react-i18next:: ".concat(n[0])),(r=console).warn.apply(r,n)}}var P={};function I(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];typeof e[0]=="string"&&P[e[0]]||(typeof e[0]=="string"&&(P[e[0]]=new Date),M.apply(void 0,e))}function L(r,e,n){r.loadNamespaces(e,function(){if(r.isInitialized)n();else{var a=function i(){setTimeout(function(){r.off("initialized",i)},0),n()};r.on("initialized",a)}})}function U(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=e.languages[0],i=e.options?e.options.fallbackLng:!1,u=e.languages[e.languages.length-1];if(a.toLowerCase()==="cimode")return!0;var t=function(f,o){var g=e.services.backendConnector.state["".concat(f,"|").concat(o)];return g===-1||g===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!t(e.isLanguageChangingTo,r)?!1:!!(e.hasResourceBundle(a,r)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||t(a,r)&&(!i||t(u,r)))}function W(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e.languages||!e.languages.length)return I("i18n.languages were undefined or empty",e.languages),!0;var a=e.options.ignoreJSONStructure!==void 0;return a?e.hasLoadedNamespace(r,{precheck:function(u,t){if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&u.services.backendConnector.backend&&u.isLanguageChangingTo&&!t(u.isLanguageChangingTo,r))return!1}}):U(r,e,n)}function _(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var a,i,u,t,d=[],f=!0,o=!1;try{if(u=(n=n.call(r)).next,e!==0)for(;!(f=(a=u.call(n)).done)&&(d.push(a.value),d.length!==e);f=!0);}catch(g){o=!0,i=g}finally{try{if(!f&&n.return!=null&&(t=n.return(),Object(t)!==t))return}finally{if(o)throw i}}return d}}function J(r,e){return E(r)||_(r,e)||z(r,e)||D()}function j(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),n.push.apply(n,a)}return n}function S(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j(Object(n),!0).forEach(function(a){H(r,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(n,a))})}return r}function q(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.i18n,a=p.useContext(k)||{},i=a.i18n,u=a.defaultNS,t=n||i||R();if(t&&!t.reportNamespaces&&(t.reportNamespaces=new F),!t){I("You will need to pass in an i18next instance by using initReactI18next");var d=function(l){return Array.isArray(l)?l[l.length-1]:l},f=[d,{},!1];return f.t=d,f.i18n={},f.ready=!1,f}t.options.react&&t.options.react.wait!==void 0&&I("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var o=S(S(S({},B()),t.options.react),e),g=o.useSuspense,T=o.keyPrefix,s=u||t.options&&t.options.defaultNS;s=typeof s=="string"?[s]:s||["translation"],t.reportNamespaces.addUsedNamespaces&&t.reportNamespaces.addUsedNamespaces(s);var m=(t.isInitialized||t.initializedStoreOnce)&&s.every(function(c){return W(c,t,o)});function h(){return t.getFixedT(null,o.nsMode==="fallback"?s:s[0],T)}var A=p.useState(h),x=J(A,2),N=x[0],w=x[1],v=p.useRef(!0);p.useEffect(function(){var c=o.bindI18n,l=o.bindI18nStore;v.current=!0,!m&&!g&&L(t,s,function(){v.current&&w(h)});function y(){v.current&&w(h)}return c&&t&&t.on(c,y),l&&t&&t.store.on(l,y),function(){v.current=!1,c&&t&&c.split(" ").forEach(function(O){return t.off(O,y)}),l&&t&&l.split(" ").forEach(function(O){return t.store.off(O,y)})}},[t,s.join()]);var C=p.useRef(!0);p.useEffect(function(){v.current&&!C.current&&w(h),C.current=!1},[t]);var b=[N,t,m];if(b.t=N,b.i18n=t,b.ready=m,m||!m&&!g)return b;throw new Promise(function(c){L(t,s,function(){c()})})}export{q as u};
