import{j as a}from"./jsx-runtime-D_zvdyIk.js";import{c as l}from"./index-xf0-QVxD.js";import{r as e}from"./index-BKyFwriW.js";import{U as b,a as D}from"./enums-j1G55Avl.js";import{E as w}from"./etag-C4mhMif4.js";import"./link-i8Vdy082.js";import"./logo-CpEpTeSO.js";import{I as G}from"./input-Cb6zUZKs.js";import"./title-DMBq_gjU.js";import"./button-Dn6_MprM.js";import"./avatar-Dw7VE7nt.js";import"./loader-DjLiw7AR.js";import"./select-BiNXl3aT.js";import"./tokenID-BtSuzah3.js";import"./tooltip-BZIAJRfH.js";import"./switcher-CYqRQcCk.js";import"./snackbar-3enaQt1z.js";import"./textarea-Cxlbd_yw.js";import"./copyLink-BytqdUi0.js";import"./envelope-UyDJcHHj.js";import"./separator-Lc8UIbZS.js";import"./sortButton-DO6JhAAs.js";import"./backButton-I5T8UvXO.js";import"./navBarItem-BmhEqPzT.js";import"./paperStatus-Nc_ueS_S.js";import"./actionMenuItem-D6ZAt_0h.js";import"./copyLinkSecure-DKkeiFSN.js";import"./privateMessage-DzZNFr4S.js";import"./greenTechnology-BbfY9D-t.js";import"./actionMenuButton-BDwytS_X.js";import{u as K}from"./useTranslation-CO63FDpr.js";const O="_addEtag_j8r9z_1",X="_addEtag__area_j8r9z_10",$="_addEtag__dropdown_j8r9z_23",F="_addEtag__list_j8r9z_39",H="_addEtag__title_j8r9z_46",P="_addEtag__error_j8r9z_53",B="_addEtag__input_j8r9z_61",J="_addEtag__inputWrapper_j8r9z_61",Q="_addEtag__inputType_j8r9z_64",s={addEtag:O,addEtag__area:X,addEtag__dropdown:$,addEtag__list:F,addEtag__title:H,addEtag__error:P,addEtag__input:B,addEtag__inputWrapper:J,addEtag__inputType:Q},T=3e3,y=40,V=10,c=(u,o)=>u.some(x=>x.toLowerCase()===o.toLowerCase()),q=({suggestedTags:u=[],onTagsChange:o,initialTags:x=[],classes:i={}})=>{const{t:m}=K(),[d,v]=e.useState(x),[_,I]=e.useState(""),[N,h]=e.useState(!1),[g,S]=e.useState(""),[z,E]=e.useState(!1),n=e.useMemo(()=>_.trim(),[_]),A=e.useMemo(()=>_.length>0,[_]),p=e.useMemo(()=>u.filter(t=>!c(d,t)),[u,d]),M=e.useMemo(()=>c(d,n),[d,n]),k=e.useMemo(()=>c(p,n),[p,n]),C=e.useMemo(()=>g.length>0||p.length>0,[g,p]),f=e.useCallback(t=>{if(t.length>y){E(!0),setTimeout(()=>E(!1),T);return}if(d.length>=V){E(!0),setTimeout(()=>E(!1),T);return}if(t&&!c(d,t)){const r=[...d,t];v(r),I(""),S(""),o==null||o(r)}},[d,o]),L=e.useCallback(t=>{I(t);const r=t.trim(),R=c(d,r),j=c(p,r);S(!R&&!j&&r.length>0?r:"")},[d,p]),U=e.useCallback(t=>{t.key==="Enter"&&n&&f(n)},[n,f]),W=e.useCallback(t=>{const r=d.filter((R,j)=>j!==t);v(r),o==null||o(r)},[d,o]);return e.useEffect(()=>{if(A&&(M||k)){h(!0);const t=setTimeout(()=>h(!1),T);return()=>clearTimeout(t)}h(!1)},[A,M,k]),a.jsxs("div",{className:l(s.addEtag,i.root),"data-id-component":"addEtag",children:[a.jsxs("div",{className:l(s.addEtag__area,i.area),children:[(N||z)&&a.jsxs("div",{className:l(s.addEtag__error,i.error),children:[N&&a.jsxs("span",{children:[a.jsx("b",{children:_})," - ",m("plugins.addEtag.alreadyExists")]}),z&&a.jsx("span",{children:_.length>y?m("plugins.addEtag.maxLength",{max:y}):m("plugins.addEtag.maxCount",{max:V})})]}),d.length>0&&a.jsx("div",{className:l(s.addEtag__list,i.list),children:d.map((t,r)=>a.jsx(w,{title:t,size:b.sm,isRemove:!0,onClick:()=>W(r)},`${t}-${r}`))}),a.jsx(G,{placeholder:m("plugins.addEtag.placeholder"),autoFocus:!0,value:_,onChange:L,onKeyDown:U,classes:{root:s.addEtag__input,type:s.addEtag__inputType,wrapper:s.addEtag__inputWrapper}})]}),C&&a.jsxs("div",{className:l(s.addEtag__dropdown,i.dropdown),children:[a.jsx("div",{className:l(s.addEtag__title,i.title),children:g.length>0?m("plugins.addEtag.dropdownTitleResults"):m("plugins.addEtag.dropdownTitleSuggested")}),g.length>0&&a.jsx("div",{className:l(s.addEtag__dropdownNew,i.dropdownNew),children:a.jsx(w,{color:D.secondary,title:g,isAdd:!0,onClick:()=>f(n)})}),a.jsx("div",{className:l(s.addEtag__list,i.list),children:p.map(t=>a.jsx(w,{title:t,size:b.sm,disabled:!1,onClick:()=>f(t)},t))})]})]})};try{q.displayName="AddEtag",q.__docgenInfo={description:"",displayName:"AddEtag",props:{suggestedTags:{defaultValue:{value:"[]"},description:"",name:"suggestedTags",required:!1,type:{name:"readonly string[]"}},onTagsChange:{defaultValue:null,description:"",name:"onTagsChange",required:!1,type:{name:"(tags: string[]) => void"}},initialTags:{defaultValue:{value:"[]"},description:"",name:"initialTags",required:!1,type:{name:"string[]"}},classes:{defaultValue:{value:"{}"},description:"",name:"classes",required:!1,type:{name:'Partial<Record<"area" | "title" | "root" | "list" | "dropdown" | "error" | "dropdownNew", string>>'}}}}}catch{}export{q as A};
